<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defensa TFM: Detección de Fraudes en Tarjetas de Crédito</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #003366; /* Azul oscuro corporativo */
            --secondary-color: #007bff; /* Azul brillante para acentos */
            --text-color: #333;
            --bg-color: #f8f9fa;
            --header-font: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --body-font: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--body-font);
            color: var(--text-color);
            background-color: var(--bg-color);
            line-height: 1.6;
            overflow: hidden;
        }

        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 0.75rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }

        .navbar a {
            color: var(--primary-color);
            text-decoration: none;
            padding: 0.5rem 1rem;
            margin: 0 0.25rem;
            font-weight: 600;
            font-family: var(--header-font);
            transition: color 0.3s, background-color 0.3s;
            border-radius: 5px;
        }

        .navbar a:hover {
            color: white;
            background-color: var(--secondary-color);
        }

        .slide {
            min-height: 100vh;
            width: 100%;
            padding: 8rem 5%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            border-bottom: 1px solid #ddd;
            opacity: 0;
            transform: translateX(50px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        
        .slide.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .slide-content {
            max-width: 1000px;
            width: 100%;
        }

        .slide h1 {
            font-family: var(--header-font);
            font-size: 3.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .slide h2 {
            font-family: var(--header-font);
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 2rem;
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        .slide h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background-color: var(--secondary-color);
        }

        .slide p, .slide li {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            text-align: left;
        }
        
        .slide .lead {
            font-size: 1.4rem;
            font-weight: 300;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3rem;
            margin-bottom: 2rem;
        }

        .logo {
            max-height: 80px;
            width: auto;
        }

        #slide1 h1 {
            font-size: 4rem;
        }
        #slide1 .subtitle {
            font-size: 1.5rem;
            color: var(--secondary-color);
            margin-bottom: 1rem;
        }
        #slide1 .authors {
            font-size: 1.2rem;
            margin-top: 2rem;
        }
        #slide1 .authors p {
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            width: 100%;
            margin-top: 2rem;
            text-align: left;
        }

        .card {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        .card h3 {
            color: var(--secondary-color);
            font-family: var(--header-font);
            margin-bottom: 1rem;
        }
        .card ul {
            list-style-position: inside;
        }

        .chart-container {
            width: 100%;
            max-width: 800px;
            margin: 2rem auto;
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .matrix-container {
            display: flex;
            justify-content: space-around;
            gap: 2rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .confusion-matrix {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            padding: 1.5rem;
            width: 350px;
        }

        .confusion-matrix h4 {
            text-align: center;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            color: var(--primary-color);
        }

        .confusion-matrix table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }

        .confusion-matrix th, .confusion-matrix td {
            padding: 0.8rem;
            border: 1px solid #eee;
        }

        .confusion-matrix th {
            background-color: #f2f2f2;
            font-weight: 600;
        }
        
        .confusion-matrix .label {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .confusion-matrix .tn, .confusion-matrix .tp {
            background-color: #e8f5e9; /* Verde claro */
        }
        
        .confusion-matrix .fn, .confusion-matrix .fp {
            background-color: #ffebee; /* Rojo claro */
        }

        .highlight {
            color: var(--secondary-color);
            font-weight: 700;
        }
        
        .final-slide {
            text-align: center;
        }
        .final-slide p {
            text-align: center;
        }

        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background-color: #f0f0f0;
            z-index: 1001;
        }

        .progress-bar {
            height: 100%;
            width: 0;
            background-color: var(--secondary-color);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>

    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <nav class="navbar">
        <a href="#slide1">Inicio</a>
        <a href="#slide2">Problema</a>
        <a href="#slide4">Metodología</a>
        <a href="#slide7">Resultados</a>
        <a href="#slide11">Conclusiones</a>
        <a href="#slide13">Futuro</a>
        <a href="#slide14">Contacto</a>
    </nav>

    <section id="slide1" class="slide">
        <div class="slide-content">
            <div class="logo-container">
                <img src="./umecit.png" alt="Logo UMECIT" class="logo">
                <img src="./immune.png" alt="Logo IMMUNE" class="logo">
            </div>
            <p class="subtitle">Defensa de Trabajo de Fin de Máster</p>
            <h1>Detección de Fraudes en Tarjetas de Crédito en el Sector Bancario</h1>
            <div class="authors">
                <p><strong>Autores:</strong> Ronny Zapata y Miguel Caballero</p>
                <p><strong>Tutor:</strong> Manuel Lopez</p>
                <p><strong>Fecha:</strong> 10/11/2025</p>
            </div>
        </div>
    </section>

    <section id="slide2" class="slide">
        <div class="slide-content">
            <h2>El Problema: Una Amenaza Creciente y Sofisticada</h2>
            <p class="lead">El fraude con tarjetas de crédito causa pérdidas millonarias y daña la confianza del cliente. Los métodos tradicionales son insuficientes ante la complejidad y evolución de los nuevos patrones de fraude.</p>
            <div class="grid-container">
                <div class="card">
                    <h3>Impacto Directo</h3>
                    <p>Pérdidas económicas sustanciales para bancos y titulares de tarjetas.</p>
                </div>
                <div class="card">
                    <h3>Erosión de Confianza</h3>
                    <p>Afecta la seguridad del consumidor en los sistemas de pago electrónico.</p>
                </div>
                <div class="card">
                    <h3>Necesidad Estratégica</h3>
                    <p>La detección robusta es un pilar para la sostenibilidad del sector financiero.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="slide3" class="slide">
        <div class="slide-content">
            <h2>Nuestra Misión: Encontrar la Mejor Defensa</h2>
            <p class="lead">El objetivo principal de este estudio es identificar las técnicas de Machine Learning más eficientes y robustas para detectar transacciones fraudulentas, proporcionando una guía clara para su implementación en el sector bancario.</p>
             <div class="grid-container">
                <div class="card">
                    <h3>Implementar</h3>
                    <p>Desarrollar y entrenar un conjunto diverso de modelos de ML, desde árboles de decisión hasta redes neuronales y XGBoost.</p>
                </div>
                <div class="card">
                    <h3>Comparar</h3>
                    <p>Evaluar rigurosamente la efectividad de cada modelo utilizando métricas clave como F1-Score, Recall y AUC PR.</p>
                </div>
                <div class="card">
                    <h3>Recomendar</h3>
                    <p>Proponer los enfoques más adecuados basados en los hallazgos empíricos, considerando distintos objetivos operativos.</p>
                </div>
            </div>
        </div>
    </section>
    
    <section id="slide4" class="slide">
        <div class="slide-content">
            <h2>El Campo de Batalla: Un Dataset Realista y Complejo</h2>
            <p class="lead">Utilizamos un dataset público de Kaggle con transacciones europeas reales. Su principal característica y nuestro mayor desafío es el extremo desbalanceo entre clases.</p>
            <div class="chart-container">
                <canvas id="classDistributionChart"></canvas>
            </div>
            <p style="text-align:center; font-weight: bold;">De 284,807 transacciones, <span class="highlight">¡solo el 0.17% son fraudulentas!</span> Esto exige estrategias especializadas.</p>
        </div>
    </section>

    <section id="slide5" class="slide">
        <div class="slide-content">
            <h2>Nuestro Arsenal: Los Modelos Bajo la Lupa</h2>
            <p class="lead">Evaluamos un espectro de algoritmos para obtener una visión completa, combinando modelos supervisados y no supervisados.</p>
            <div class="grid-container">
                <div class="card">
                    <h3>Modelos Supervisados</h3>
                    <ul>
                        <li><strong>Árbol de Decisión (DT):</strong> Simple e interpretable.</li>
                        <li><strong>Máquina de Soporte Vectorial (SVM):</strong> Potente para relaciones no lineales.</li>
                        <li><strong>Red Neuronal (NN):</strong> Capaz de aprender patrones muy complejos.</li>
                        <li><strong>XGBoost:</strong> Un estándar de la industria por su alto rendimiento.</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>Modelos No Supervisados</h3>
                     <ul>
                        <li><strong>Isolation Forest:</strong> Eficaz para aislar anomalías.</li>
                        <li><strong>DBSCAN:</strong> Detecta outliers basándose en la densidad de los datos.</li>
                        <li><strong>Rol:</strong> Usados como sistema complementario para detectar fraudes novedosos.</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section id="slide6" class="slide">
        <div class="slide-content">
            <h2>Táctica Clave: Nivelando el Terreno de Juego</h2>
            <p class="lead">Para que los modelos aprendan a identificar el fraude correctamente, primero debemos "enseñarles" cómo es. Abordamos el desbalanceo de datos con dos técnicas avanzadas.</p>
            <div class="grid-container">
                <div class="card">
                    <h3>SMOTE (Synthetic Minority Over-sampling Technique)</h3>
                    <p>Crea nuevas muestras de fraude "sintéticas" pero realistas, basadas en las transacciones fraudulentas existentes. Es como crear "avatares" de los fraudes conocidos para tener más ejemplos de los que aprender.</p>
                </div>
                <div class="card">
                    <h3>GANs (Redes Generativas Adversarias)</h3>
                    <p>Un enfoque de vanguardia donde dos redes neuronales compiten: una "falsificadora" (Generador) crea nuevos datos de fraude y una "detective" (Discriminador) intenta distinguirlos de los reales. El resultado son datos sintéticos de altísima calidad.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="slide7" class="slide">
        <div class="slide-content">
            <h2>Resultados: Comparativa de Modelos con SMOTE</h2>
            <p class="lead">Tras balancear los datos con SMOTE, el modelo XGBoost Optimizado demostró ser el más robusto y equilibrado, superando a los demás en las métricas más importantes.</p>
            <div class="chart-container">
                <canvas id="resultsSmoteChart"></canvas>
            </div>
            <p style="text-align:center;"><span class="highlight">XGBoost Optimizado</span> logra el mejor balance, detectando el <span class="highlight">79%</span> de los fraudes (Recall) con una precisión del <span class="highlight">77%</span>.</p>
        </div>
    </section>

    <section id="slide8" class="slide">
        <div class="slide-content">
            <h2>La Sorpresa: El Poder de las Redes Neuronales con GANs</h2>
            <p class="lead">Al aumentar los datos con GANs, la Red Neuronal (NN) dio un salto cualitativo en su precisión, reduciendo drásticamente el número de falsas alarmas.</p>
            <div class="matrix-container">
                <div class="confusion-matrix">
                    <h4>NN + SMOTE</h4>
                    <table>
                        <tr><td></td><th scope="col">Pred. Legítima</th><th scope="col">Pred. Fraude</th></tr>
                        <tr><th scope="row" class="label">Real Legítima</th><td class="tn">56625</td><td class="fp">26</td></tr>
                        <tr><th scope="row" class="label">Real Fraude</th><td class="fn">22</td><td class="tp">73</td></tr>
                    </table>
                </div>
                <div class="confusion-matrix">
                    <h4>NN + GAN (Opt.)</h4>
                    <table>
                        <tr><td></td><th scope="col">Pred. Legítima</th><th scope="col">Pred. Fraude</th></tr>
                        <tr><th scope="row" class="label">Real Legítima</th><td class="tn">56639</td><td class="fp">12</td></tr>
                        <tr><th scope="row" class="label">Real Fraude</th><td class="fn">24</td><td class="tp">71</td></tr>
                    </table>
                </div>
            </div>
            <p style="text-align:center; margin-top: 2rem;">El modelo con GAN <span class="highlight">redujo los Falsos Positivos en más de un 50%</span> (de 26 a 12), logrando la precisión más alta de todos los experimentos: <span class="highlight">86%</span>.</p>
        </div>
    </section>

    <section id="slide9" class="slide">
        <div class="slide-content">
            <h2>El Veredicto: ¿Cuál es el Mejor Defensor?</h2>
            <p class="lead">La elección del "mejor" modelo depende de la prioridad estratégica del banco: ¿maximizar la cantidad de fraudes detectados o minimizar las molestias a clientes inocentes?</p>
            <div class="grid-container">
                <div class="card">
                    <h3>XGBoost + SMOTE</h3>
                    <p><strong>Fortaleza:</strong> Mejor rendimiento general y mayor capacidad de detección (Recall del 79% y el mejor AUC PR de 0.8145).</p>
                    <p><strong>Ideal para:</strong> Una estrategia que busca <span class="highlight">maximizar la cantidad de fraudes interceptados</span>, aceptando un número moderado de falsas alarmas.</p>
                </div>
                <div class="card">
                    <h3>Red Neuronal + GAN</h3>
                    <p><strong>Fortaleza:</strong> Precisión excepcional (86%) y el F1-Score más alto (0.80), minimizando las falsas alarmas.</p>
                    <p><strong>Ideal para:</strong> Una estrategia enfocada en <span class="highlight">reducir costes operativos y el impacto negativo en el cliente</span>, al generar muy pocas alertas incorrectas.</p>
                </div>
            </div>
        </div>
    </section>
    
    <section id="slide11" class="slide">
        <div class="slide-content">
            <h2>Conclusiones Clave</h2>
            <p class="lead">Nuestro estudio comparativo ofrece una visión clara sobre la eficacia de distintas estrategias de Machine Learning en un escenario realista de detección de fraude.</p>
            <ul style="list-style-type: disc; text-align: left; max-width: 800px; margin: 0 auto;">
                <li>El manejo del desbalanceo de clases con técnicas como <span class="highlight">SMOTE o GANs</span> no es opcional, es <span class="highlight">fundamental</span> para obtener resultados significativos.</li>
                <li><span class="highlight">XGBoost Optimizado</span> se consagra como el modelo más robusto y equilibrado para una detección de fraude global.</li>
                <li>Las <span class="highlight">GANs</span> demuestran ser una técnica de vanguardia y extremadamente poderosa para <span class="highlight">maximizar la precisión</span>, un factor clave en entornos operativos.</li>
                <li>La elección final del modelo debe alinearse con la <span class="highlight">estrategia de negocio</span>: priorizar la tasa de detección (Recall) o la fiabilidad de las alertas (Precision).</li>
            </ul>
        </div>
    </section>

    <section id="slide12" class="slide">
        <div class="slide-content">
            <h2>Implicaciones Prácticas para el Sector Bancario</h2>
            <p class="lead">Estos hallazgos se traducen en acciones concretas que las instituciones financieras pueden implementar para fortalecer sus sistemas de defensa contra el fraude.</p>
            <div class="grid-container">
                <div class="card">
                    <h3>Adoptar Modelos Avanzados</h3>
                    <p>Ir más allá de los sistemas basados en reglas y adoptar modelos de ML como XGBoost y Redes Neuronales, que capturan patrones complejos con mayor eficacia.</p>
                </div>
                <div class="card">
                    <h3>Usar Métricas Correctas</h3>
                    <p>Evaluar los sistemas con métricas como <span class="highlight">AUC PR y F1-Score</span>. La "exactitud" general es una métrica engañosa en problemas de fraude.</p>
                </div>
                <div class="card">
                    <h3>Implementar Estrategias de Datos</h3>
                    <p>Integrar técnicas de manejo de desbalanceo (SMOTE/GANs) en el ciclo de vida del desarrollo de modelos para mejorar su rendimiento.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="slide13" class="slide">
        <div class="slide-content">
            <h2>Trabajo Futuro: La Próxima Frontera</h2>
            <p class="lead">Este estudio sienta las bases para futuras investigaciones que pueden hacer los sistemas de detección aún más potentes, inteligentes y aplicables al mundo real.</p>
            <div class="grid-container">
                <div class="card">
                    <h3>Modelos de Grafos (GNNs)</h3>
                    <p>Analizar transacciones no como eventos aislados, sino como una red conectada para descubrir redes de fraude complejas.</p>
                </div>
                <div class="card">
                    <h3>Despliegue en Tiempo Real</h3>
                    <p>Investigar la arquitectura de sistemas para que estos modelos puedan dar una respuesta en milisegundos, aprobando o bloqueando transacciones en vivo.</p>
                </div>
                <div class="card">
                    <h3>IA Explicable (XAI)</h3>
                    <p>Integrar herramientas que expliquen "por qué" un modelo marca una transacción como fraude, para dar poder a los analistas y mejorar la transparencia.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="slide14" class="slide final-slide">
        <div class="slide-content">
            <h2>Agradecimientos y Contacto</h2>
            <p class="lead">Gracias por su tiempo y atención.</p>
            <p>Agradecemos a nuestro tutor, a la universidad y a todos los que nos han apoyado en este viaje.</p>
            <div style="margin-top: 3rem;">
                <p><strong>Ronny Zapata</strong> - ronnysuero@gmail.com</p>
                <p><strong>Miguel Caballero</strong> - inv.e22.mc@gmail.com</p>
            </div>
            <h2 style="margin-top: 4rem; font-size: 3rem;">¿Preguntas?</h2>
        </div>
    </section>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- Chart creation functions ---
    function createClassDistributionChart() {
        const ctxClass = document.getElementById('classDistributionChart');
        if (ctxClass && !ctxClass.dataset.rendered) {
            new Chart(ctxClass, {
                type: 'bar',
                data: {
                    labels: ['Legítima (Clase 0)', 'Fraude (Clase 1)'],
                    datasets: [{
                        label: 'Número de Transacciones',
                        data: [284315, 492],
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.6)',
                            'rgba(255, 99, 132, 0.6)'
                        ],
                        borderColor: [
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 99, 132, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    animation: {
                        duration: 1500,
                        easing: 'easeOutBounce'
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Distribución de Clases: Extremo Desbalanceo',
                            font: { size: 18, family: 'var(--header-font)' }
                        },
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            type: 'logarithmic',
                            title: {
                                display: true,
                                text: 'Número de Transacciones (Escala Logarítmica)'
                            }
                        }
                    }
                }
            });
            ctxClass.dataset.rendered = 'true';
        }
    }

    function createResultsSmoteChart() {
        const ctxSmote = document.getElementById('resultsSmoteChart');
        if (ctxSmote && !ctxSmote.dataset.rendered) {
            new Chart(ctxSmote, {
                type: 'bar',
                data: {
                    labels: ['Árbol Decisión', 'SVM', 'Red Neuronal', 'XGBoost Optimizado'],
                    datasets: [
                    {
                        label: 'Recall (Detección)',
                        data: [0.69, 0.83, 0.77, 0.79],
                        backgroundColor: 'rgba(54, 162, 235, 0.6)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Precision (Fiabilidad)',
                        data: [0.39, 0.10, 0.74, 0.77],
                        backgroundColor: 'rgba(75, 192, 192, 0.6)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'F1-Score (Balance)',
                        data: [0.50, 0.18, 0.75, 0.78],
                        backgroundColor: 'rgba(255, 159, 64, 0.6)',
                        borderColor: 'rgba(255, 159, 64, 1)',
                        borderWidth: 1
                    }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    animation: {
                        duration: 1500,
                        easing: 'easeOutBounce'
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Rendimiento de Modelos con SMOTE',
                            font: { size: 18, family: 'var(--header-font)' }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y.toFixed(2);
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1.0,
                            title: {
                                display: true,
                                text: 'Puntuación'
                            }
                        }
                    }
                }
            });
            ctxSmote.dataset.rendered = 'true';
        }
    }

    // --- Intersection Observer for slide animations and chart rendering ---
    const slides = document.querySelectorAll('.slide');
    let slideSections = Array.from(slides);
    let currentSlideIndex = 0;

    const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.5 // Se considera visible si el 50% lo está
    };

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                const slideId = entry.target.id;
                currentSlideIndex = slideSections.findIndex(slide => slide.id === slideId);
                updateProgressBar();

                // Log speaker notes to the console
                if (speakerNotes[slideId]) {
                    console.clear();
                    console.log(`%c--- Notas para ${slideId} ---`, 'font-weight: bold; font-size: 1.2em; color: #007bff;');
                    console.log(speakerNotes[slideId]);
                }

                // Render chart when its slide is visible
                if (entry.target.id === 'slide4') {
                    createClassDistributionChart();
                }
                if (entry.target.id === 'slide7') {
                    createResultsSmoteChart();
                }
            }
        });
    }, observerOptions);

    slides.forEach(slide => {
        observer.observe(slide);
    });

    // --- Keyboard Navigation ---
    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight') {
            e.preventDefault();
            const nextSlideIndex = currentSlideIndex + 1;
            if (nextSlideIndex < slideSections.length) {
                slideSections[nextSlideIndex].scrollIntoView({ behavior: 'smooth' });
            }
        } else if (e.key === 'ArrowLeft') {
            e.preventDefault();
            const prevSlideIndex = currentSlideIndex - 1;
            if (prevSlideIndex >= 0) {
                slideSections[prevSlideIndex].scrollIntoView({ behavior: 'smooth' });
            }
        } else if (e.key === 'f' || e.key === 'F') {
            e.preventDefault();
            toggleFullScreen();
        }
    });

    function toggleFullScreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
        } else {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            }
        }
    }

    function updateProgressBar() {
        const progressBar = document.getElementById('progressBar');
        const progress = ((currentSlideIndex + 1) / slideSections.length) * 100;
        progressBar.style.width = `${progress}%`;
    }

    const speakerNotes = {
        slide1: `### **Diapositiva 1: Portada (Tiempo: ~30 segundos)**

**(Mientras la diapositiva está en pantalla)**

"Buenos días a todos. Mi nombre es Ronny Zapata y junto con mi compañero Miguel Caballero, estamos aquí para presentar la defensa de nuestro Trabajo de Fin de Máster titulado 'Detección de Fraudes en Tarjetas de Crédito en el Sector Bancario'.

Agradecemos la presencia del jurado, de nuestro tutor, y de todos los asistentes."`,
        slide2: `### **Diapositiva 2: El Problema (Tiempo: ~1 minuto)**

**(Mientras la diapositiva está en pantalla)**

"Comencemos por el problema que nos motivó a realizar este estudio. El fraude con tarjetas de crédito no es solo una cifra en un balance; es una amenaza creciente y cada vez más sofisticada que tiene un triple impacto:

Primero, el **impacto económico directo**, que se traduce en pérdidas millonarias tanto para las instituciones financieras como para los clientes.

Segundo, y quizás más importante, la **erosión de la confianza**. Cada incidente de fraude debilita la seguridad que los consumidores sienten al usar sistemas de pago electrónico, que son la base de la economía digital actual.

Y tercero, esto convierte la detección de fraude en una **necesidad estratégica**. Ya no es suficiente con reaccionar; es imperativo anticiparse. Los métodos tradicionales, a menudo basados en reglas fijas, simplemente ya no son suficientes para combatir a adversarios que adaptan y evolucionan sus tácticas constantemente."`,
        slide3: `### **Diapositiva 3: Nuestra Misión (Tiempo: ~1 minuto)**

**(Mientras la diapositiva está en pantalla)**

"Ante este desafío, nuestra misión con este trabajo fue clara y se centró en tres pilares fundamentales.

Primero, **Implementar**. No nos quedamos en la teoría. Desarrollamos y entrenamos un arsenal diverso de modelos de Machine Learning, desde los más interpretables como los Áraboles de Decisión, hasta soluciones de vanguardia como XGBoost y las Redes Neuronales.

Segundo, **Comparar**. El núcleo de nuestra investigación fue una evaluación rigurosa y objetiva. Sometimos a cada modelo a las mismas condiciones y los medimos con métricas específicas para problemas de fraude, como el F1-Score y el AUC PR, que van más allá de la simple exactitud.

Y finalmente, **Recomendar**. Nuestro objetivo último es que este trabajo tenga una aplicación práctica. Queríamos traducir nuestros hallazgos empíricos en una guía clara que pueda ayudar a las instituciones financieras a elegir las herramientas más adecuadas para sus necesidades y estrategias de negocio."`,
        slide4: `### **Diapositiva 4: El Campo de Batalla: El Dataset (Tiempo: ~1.5 minutos)**

**(Mientras el gráfico de barras se anima)**

"Para llevar a cabo nuestra misión, necesitábamos un campo de batalla realista. Por ello, seleccionamos un conocido dataset público de Kaggle, que contiene transacciones reales con tarjetas de crédito europeas durante un periodo de dos días.

Este dataset nos presenta un desafío fundamental, que pueden ver claramente en este gráfico: el **extremo desbalanceo de clases**.

**(Señalar el gráfico)**

Como pueden observar, de más de 280,000 transacciones, menos de 500 son fraudulentas. Esto representa apenas un 0.17% del total. ¿Por qué es esto un problema? Porque un modelo ingenuo podría alcanzar una exactitud del 99.8% simplemente clasificando *todas* las transacciones como legítimas, pero sería completamente inútil en la práctica, ya que no detectaría ni un solo fraude.

Este desbalanceo extremo es el principal obstáculo a superar y la razón por la que se requieren técnicas especializadas, que abordaremos a continuación."`,
        slide5: `### **Diapositiva 5: Nuestro Arsenal: Los Modelos (Tiempo: ~1.5 minutos)**

**(Mientras la diapositiva está en pantalla)**

"Para enfrentar este desafío, seleccionamos un arsenal de algoritmos variado.

En el lado de los **modelos supervisados**, que aprenden de datos previamente etiquetados, incluimos:
- El **Árbol de Decisión**, por su simplicidad e interpretabilidad.
- La **Máquina de Soporte Vectorial o SVM**, por su capacidad para encontrar relaciones no lineales complejas.
- La **Red Neuronal**, que puede aprender patrones extremadamente sutiles y complejos, imitando el funcionamiento del cerebro.
- Y **XGBoost**, un algoritmo basado en árboles que es actualmente un estándar en la industria por su altísimo rendimiento y eficiencia.

Adicionalmente, exploramos **modelos no supervisados** como **Isolation Forest** y **DBSCAN**. Estos no aprenden de etiquetas, sino que buscan anomalías o 'puntos raros' en los datos. Su rol no es tanto ser la primera línea de defensa, sino actuar como un sistema complementario, capaz de detectar tipos de fraude completamente nuevos que los modelos supervisados nunca han visto."`,
        slide6: `### **Diapositiva 6: Táctica Clave: Manejo del Desbalanceo (Tiempo: ~1 minuto)**

**(Mientras la diapositiva está en pantalla)**

"Como mencionamos, el desbalanceo de datos es nuestro principal enemigo. Para combatirlo, no podíamos entrenar nuestros modelos con los datos en crudo. Necesitábamos nivelar el terreno de juego.

Para ello, aplicamos dos tácticas avanzadas:

La primera es **SMOTE**. De forma sencilla, SMOTE mira los pocos ejemplos de fraude que tenemos y crea "clones" sintéticos, pero muy realistas. Es una forma inteligente de generar más datos de la clase minoritaria para que el modelo tenga más ejemplos de los que aprender.

La segunda técnica, más sofisticada, son las **GANs** o Redes Generativas Adversarias. Aquí, tenemos dos redes neuronales compitiendo. Una, el 'Generador', actúa como un falsificador, creando datos de fraude cada vez más convincentes. La otra, el 'Discriminador', actúa como un detective que intenta diferenciar los datos falsos de los reales. A través de esta competencia, el generador aprende a crear datos sintéticos de una calidad excepcional.

Estas dos técnicas nos permitieron crear conjuntos de datos de entrenamiento balanceados, un paso crucial para el éxito de nuestros modelos."`,
        slide7: `### **Diapositiva 7: Resultados con SMOTE (Tiempo: ~2 minutos)**

**(Mientras el gráfico de barras se anima)**

"Pasemos a los resultados. Primero, veamos el rendimiento de nuestros modelos entrenados con datos balanceados mediante SMOTE.

En este gráfico comparamos cuatro modelos a través de tres métricas clave: Recall (azul), que mide cuántos fraudes reales se detectaron; Precision (verde), que mide qué tan fiables son nuestras alertas; y F1-Score (naranja), que es un balance entre ambas.

**(Analizar el gráfico)**

- El **Árbol de Decisión** nos sirve como una línea base, con un rendimiento modesto.
- El **SVM** sorprende con un Recall muy alto, del 83%, pero su precisión es inviablemente baja, de solo el 10%. Esto significa que, aunque detecta muchos fraudes, genera una cantidad masiva de falsas alarmas.
- La **Red Neuronal** base ya muestra un excelente equilibrio, con un F1-Score de 0.75.
- Sin embargo, el claro ganador en este escenario es **XGBoost Optimizado**. Como pueden ver, no solo tiene el Recall más alto y equilibrado con un 79%, sino que también mantiene una Precision muy sólida del 77%, logrando el F1-Score más alto.

Esto posiciona a XGBoost como el modelo supervisado más robusto y efectivo cuando se utiliza SMOTE."`,
        slide8: `### **Diapositiva 8: El Poder de las GANs (Tiempo: ~1.5 minutos)**

**(Mientras las matrices de confusión están en pantalla)**

"Ahora, ¿qué ocurrió cuando usamos las GANs para aumentar los datos de nuestra Red Neuronal? El resultado fue sorprendente y revela una ventaja clave de esta técnica.

Aquí vemos dos 'matrices de confusión'. A la izquierda, el rendimiento de la Red Neuronal con SMOTE; a la derecha, con GANs. Estas matrices nos dicen exactamente en qué acierta y en qué falla el modelo. Nos enfocaremos en los 'Falsos Positivos', que son las transacciones legítimas que el modelo marcó incorrectamente como fraude.

**(Señalar los Falsos Positivos)**

El modelo con SMOTE generó 26 falsas alarmas. Sin embargo, el modelo entrenado con datos de GAN, en su versión optimizada, **redujo este número a solo 12**. ¡Es una disminución de más del 50%!

Esto se traduce en una **precisión excepcional del 86%**, la más alta de todo nuestro estudio. La conclusión es clara: las GANs son una herramienta increíblemente poderosa para enseñar al modelo a ser más 'cuidadoso', minimizando las alertas incorrectas y, por tanto, reduciendo costes operativos y mejorando la experiencia del cliente."`,
        slide9: `### **Diapositiva 9: El Veredicto (Tiempo: ~1.5 minutos)**

**(Mientras la diapositiva está en pantalla)**

"Entonces, ¿cuál es el veredicto final? ¿Qué modelo es el mejor defensor contra el fraude? La respuesta, como suele ocurrir, es: **depende de la estrategia**.

Hemos identificado dos campeones, cada uno con una fortaleza distinta.

Por un lado, tenemos a **XGBoost con SMOTE**. Este es el 'todoterreno'. Ofrece el mejor rendimiento global, especialmente en la métrica AUC PR, que mide la calidad de la predicción a través de todos los umbrales. Es la elección ideal si la prioridad del banco es **maximizar la cantidad total de fraudes detectados**, asumiendo un coste razonable de revisión de falsas alarmas.

Por otro lado, tenemos la **Red Neuronal con GANs**. Este es el 'francotirador'. Su fortaleza es una precisión quirúrgica, inigualada por los otros modelos. Es la opción perfecta si el objetivo primordial es **minimizar el impacto en el cliente y los costes operativos** asociados a la gestión de falsos positivos.

La elección entre uno y otro no es técnica, sino estratégica."`,
        slide11: `### **Diapositiva 11: Conclusiones Clave (Tiempo: ~1 minuto)**

**(Mientras la diapositiva está en pantalla)**

"Para concluir, nuestro estudio nos deja cuatro mensajes clave:

- Primero: El **manejo del desbalanceo de datos no es un paso más, es el paso fundamental**. Sin técnicas como SMOTE o GANs, es imposible construir un modelo de detección de fraude efectivo.
- Segundo: **XGBoost Optimizado** se confirma como una solución extremadamente robusta y equilibrada, siendo una apuesta segura para un alto rendimiento general.
- Tercero: Las **GANs** emergen como una tecnología de vanguardia con un potencial inmenso, especialmente para mejorar la **precisión** y reducir los costes operativos.
- Y finalmente, la mejor solución no es universal. La elección del modelo debe ser una **decisión de negocio informada por los datos**, alineada con la prioridad estratégica de la institución, ya sea maximizar la detección o minimizar las falsas alarmas."`,
        slide12: `### **Diapositiva 12: Implicaciones Prácticas (Tiempo: ~1 minuto)**

**(Mientras la diapositiva está en pantalla)**

"¿Qué significan estos hallazgos en la práctica para una institución financiera?

Significa que es hora de **adoptar modelos avanzados**. Los sistemas basados en reglas simples ya no son suficientes. Herramientas como XGBoost y Redes Neuronales tienen la capacidad de aprender y adaptarse a patrones de fraude mucho más complejos.

Significa también que debemos **usar las métricas correctas**. La 'exactitud' es una métrica peligrosa en este campo. El éxito debe medirse con indicadores como el F1-Score y el AUC PR, que reflejan el verdadero rendimiento en la detección de la clase minoritaria, que es la que nos importa.

Y finalmente, implica **implementar estrategias de datos robustas**. El ciclo de vida de un modelo de fraude debe incluir, por defecto, una fase dedicada al manejo inteligente del desbalanceo de datos."`,
        slide13: `### **Diopositiva 13: Trabajo Futuro (Tiempo: ~1 minuto)**

**(Mientras la diapositiva está en pantalla)**

"Este trabajo abre la puerta a líneas de investigación futuras muy emocionantes.

Una de ellas es el uso de **Modelos de Grafos**, que no ven las transacciones como eventos aislados, sino como una red interconectada, permitiendo descubrir complejas redes de fraude coordinado.

Otra es el **Despliegue en Tiempo Real**. Investigar las arquitecturas necesarias para que estos modelos puedan operar en milisegundos es el paso crucial para llevarlos del laboratorio a la producción.

Y finalmente, la **IA Explicable o XAI**. Integrar herramientas que nos digan *por qué* un modelo toma una decisión es clave para empoderar a los analistas de fraude, aumentar la confianza en el sistema y cumplir con futuras regulaciones."`,
        slide14: `### **Diopositiva 14: Agradecimientos y Contacto (Tiempo: ~30 segundos)**

**(Mientras la diapositiva está en pantalla)**

"Para finalizar, queremos expresar nuestro más sincero agradecimiento a nuestro tutor por su guía, a la universidad por la oportunidad, y a todos ustedes por su tiempo y atención.

Ha sido un placer presentarles nuestro trabajo. Quedamos a su disposición para cualquier pregunta que puedan tener."

**(Pausa para preguntas)**`
    };
});
</script>

</body>
</html>
